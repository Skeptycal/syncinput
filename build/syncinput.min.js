function SyncInput(){}SyncInput.VERSION="SyncInput V1.1";SyncInput.TIMESTAMP="201611221254";SyncInput.Vector2=function(a,b){this.x=void 0!==a?a:0;this.y=void 0!==b?b:0};SyncInput.Vector2.prototype.set=function(a,b){this.x=a;this.y=b};SyncInput.Key=function(){this.justReleased=this.justPressed=this.isPressed=!1};SyncInput.Key.KEY_DOWN=-1;SyncInput.Key.KEY_UP=1;SyncInput.Key.KEY_RESET=0;SyncInput.Key.prototype.update=function(a){this.justReleased=this.justPressed=!1;a===SyncInput.Key.KEY_DOWN?(this.isPressed||(this.justPressed=!0),this.isPressed=!0):a===SyncInput.Key.KEY_UP?(this.isPressed&&(this.justReleased=!0),this.isPressed=!1):a===SyncInput.Key.KEY_RESET&&(this.justPressed=this.justReleased=!1)};
SyncInput.Key.prototype.set=function(a,b,c){this.justPressed=a;this.isPressed=b;this.justReleased=c};SyncInput.Key.prototype.reset=function(){this.justReleased=this.isPressed=this.justPressed=!1};SyncInput.Mouse=function(){this._keys=[];this._position=new SyncInput.Vector2(0,0);this._position_updated=!1;this._delta=new SyncInput.Vector2(0,0);this._wheel=0;this._wheel_updated=!1;this.keys=[];this.position=new SyncInput.Vector2(0,0);this.delta=new SyncInput.Vector2(0,0);this.wheel=0;this.canvas=null;this.events=[];for(var a=0;3>a;a++)this._keys.push(new SyncInput.Key),this.keys.push(new SyncInput.Key);var b=this;void 0!==window.onmousewheel?this.events.push([window,"mousewheel",function(a){b._wheel=
a.deltaY;b._wheel_updated=!0}]):void 0!==window.addEventListener?this.events.push([window,"DOMMouseScroll",function(a){b._wheel=30*a.detail;b._wheel_updated=!0}]):this.events.push([window,"wheel",function(a){b._wheel=a.deltaY;b._wheel_updated=!0}]);if("ontouchstart"in window||0<navigator.msMaxTouchPoints){var c=new SyncInput.Vector2(0,0);this.events.push([window,"touchstart",function(a){a=a.touches[0];c.set(a.clientX,a.clientY);b.updateKey(SyncInput.Mouse.LEFT,SyncInput.Key.KEY_DOWN)}]);this.events.push([window,
"touchend",function(a){b.updateKey(SyncInput.Mouse.LEFT,SyncInput.Key.KEY_UP)}]);this.events.push([window,"touchmove",function(a){a=a.touches[0];if(null!==b.canvas){var e=b.canvas.getBoundingClientRect();b.updatePosition(a.clientX-e.left,a.clientY-e.top,a.clientX-c.x,a.clientY-c.y)}else b.updatePosition(a.clientX,a.clientY,a.clientX-c.x,a.clientY-c.y);c.set(a.clientX,a.clientY)}])}else this.events.push([window,"mousemove",function(a){if(null!==b.canvas){var c=b.canvas.getBoundingClientRect();b.updatePosition(a.clientX-
c.left,a.clientY-c.top,a.movementX,a.movementY)}else b.updatePosition(a.clientX,a.clientY,a.movementX,a.movementY)}]),this.events.push([window,"mousedown",function(a){b.updateKey(a.which-1,SyncInput.Key.KEY_DOWN)}]),this.events.push([window,"mouseup",function(a){b.updateKey(a.which-1,SyncInput.Key.KEY_UP)}]);for(a=0;a<this.events.length;a++){var d=this.events[a];d[0].addEventListener(d[1],d[2])}};SyncInput.Mouse.LEFT=0;SyncInput.Mouse.MIDDLE=1;SyncInput.Mouse.RIGHT=2;
SyncInput.Mouse.prototype.setCanvas=function(a){this.canvas=a;a.mouseInside=!1;a.addEventListener("mouseenter",function(){this.mouseInside=!0});a.addEventListener("mouseleave",function(){this.mouseInside=!1})};SyncInput.Mouse.prototype.insideCanvas=function(){return null===this.canvas?!1:this.canvas.mouseInside};
SyncInput.Mouse.prototype.setLock=function(a){null!==this.canvas&&(a?this.canvas.requestPointerLock?this.canvas.requestPointerLock():this.canvas.mozRequestPointerLock?this.canvas.mozRequestPointerLock():this.canvas.webkitRequestPointerLock&&this.canvas.webkitRequestPointerLock():document.exitPointerLock?document.exitPointerLock():document.mozExitPointerLock?document.mozExitPointerLock():document.webkitExitPointerLock&&document.webkitExitPointerLock())};SyncInput.Mouse.prototype.buttonPressed=function(a){return this.keys[a].isPressed};
SyncInput.Mouse.prototype.buttonJustPressed=function(a){return this.keys[a].justPressed};SyncInput.Mouse.prototype.buttonJustReleased=function(a){return this.keys[a].justReleased};SyncInput.Mouse.prototype.updatePosition=function(a,b,c,d){this._position.set(a,b);this._delta.x+=c;this._delta.y+=d;this._position_updated=!0};SyncInput.Mouse.prototype.updateKey=function(a,b){-1<a&&this._keys[a].update(b)};
SyncInput.Mouse.prototype.update=function(){for(var a=0;a<this._keys.length;a++)this._keys[a].justPressed&&this.keys[a].justPressed&&(this._keys[a].justPressed=!1),this._keys[a].justReleased&&this.keys[a].justReleased&&(this._keys[a].justReleased=!1),this.keys[a].set(this._keys[a].justPressed,this._keys[a].isPressed,this._keys[a].justReleased);this._wheel_updated?(this.wheel=this._wheel,this._wheel_updated=!1):this.wheel=0;this._position_updated?(this.delta.x=this._delta.x,this.delta.y=this._delta.y,
this._delta.set(0,0),this.position.x=this._position.x,this.position.y=this._position.y,this._position_updated=!1):(this.delta.x=0,this.delta.y=0)};SyncInput.Mouse.prototype.dispose=function(){for(var a=0;a<this.events.length;a++){var b=this.events[a];b[0].removeEventListener(b[1],b[2])}};SyncInput.Keyboard=function(){this.keys=[];this.actions=[];for(var a=0;256>a;a++)this.keys.push(new SyncInput.Key);this.events=[];var b=this.actions;this.events.push([window,"keydown",function(a){b.push(a.keyCode);b.push(SyncInput.Key.KEY_DOWN)}]);this.events.push([window,"keyup",function(a){b.push(a.keyCode);b.push(SyncInput.Key.KEY_UP)}]);for(a=0;a<this.events.length;a++){var c=this.events[a];c[0].addEventListener(c[1],c[2])}};
SyncInput.Keyboard.prototype.update=function(){for(var a=0;this.actions.length>a;){var b=this.actions.shift(),c=this.actions.shift();this.keys[b].update(c);if(this.keys[b].justReleased||this.keys[b].justPressed)this.actions.push(b),this.actions.push(SyncInput.Key.KEY_RESET),a+=2}};SyncInput.Keyboard.prototype.reset=function(){this.actions=[];for(var a=0;a<this.keys.length;a++)this.keys[a].reset()};SyncInput.Keyboard.prototype.keyPressed=function(a){return this.keys[a].isPressed};
SyncInput.Keyboard.prototype.keyJustPressed=function(a){return this.keys[a].justPressed};SyncInput.Keyboard.prototype.keyJustReleased=function(a){return this.keys[a].justReleased};SyncInput.Keyboard.prototype.dispose=function(){for(var a=0;a<this.events.length;a++){var b=this.events[a];b[0].removeEventListener(b[1],b[2])}};SyncInput.Keyboard.TAB=9;SyncInput.Keyboard.ENTER=13;SyncInput.Keyboard.SHIFT=16;SyncInput.Keyboard.CTRL=17;SyncInput.Keyboard.ALT=18;SyncInput.Keyboard.CAPS_LOCK=20;
SyncInput.Keyboard.ESC=27;SyncInput.Keyboard.SPACEBAR=32;SyncInput.Keyboard.PAGE_UP=33;SyncInput.Keyboard.PAGE_DOWN=34;SyncInput.Keyboard.END=35;SyncInput.Keyboard.HOME=36;SyncInput.Keyboard.INSERT=45;SyncInput.Keyboard.DEL=46;SyncInput.Keyboard.LEFT=37;SyncInput.Keyboard.RIGHT=39;SyncInput.Keyboard.UP=38;SyncInput.Keyboard.DOWN=40;SyncInput.Keyboard.NUM0=48;SyncInput.Keyboard.NUM1=49;SyncInput.Keyboard.NUM2=50;SyncInput.Keyboard.NUM3=51;SyncInput.Keyboard.NUM4=52;SyncInput.Keyboard.NUM5=53;
SyncInput.Keyboard.NUM6=54;SyncInput.Keyboard.NUM7=55;SyncInput.Keyboard.NUM8=56;SyncInput.Keyboard.NUM9=57;SyncInput.Keyboard.A=65;SyncInput.Keyboard.B=66;SyncInput.Keyboard.C=67;SyncInput.Keyboard.D=68;SyncInput.Keyboard.E=69;SyncInput.Keyboard.F=70;SyncInput.Keyboard.G=71;SyncInput.Keyboard.H=72;SyncInput.Keyboard.I=73;SyncInput.Keyboard.J=74;SyncInput.Keyboard.K=75;SyncInput.Keyboard.L=76;SyncInput.Keyboard.M=77;SyncInput.Keyboard.N=78;SyncInput.Keyboard.O=79;SyncInput.Keyboard.P=80;
SyncInput.Keyboard.Q=81;SyncInput.Keyboard.R=82;SyncInput.Keyboard.S=83;SyncInput.Keyboard.T=84;SyncInput.Keyboard.U=85;SyncInput.Keyboard.V=86;SyncInput.Keyboard.W=87;SyncInput.Keyboard.X=88;SyncInput.Keyboard.Y=89;SyncInput.Keyboard.Z=90;SyncInput.Keyboard.F1=112;SyncInput.Keyboard.F2=113;SyncInput.Keyboard.F3=114;SyncInput.Keyboard.F4=115;SyncInput.Keyboard.F5=116;SyncInput.Keyboard.F6=117;SyncInput.Keyboard.F7=118;SyncInput.Keyboard.F8=119;SyncInput.Keyboard.F9=120;SyncInput.Keyboard.F10=121;
SyncInput.Keyboard.F11=122;SyncInput.Keyboard.F12=123;SyncInput.Gamepad=function(){var a=SyncInput.Gamepad.gamepads.length;this.buttons=null;this.product=this.vendor=this.index=-1;this.connected=!1;this.setGamepad(navigator.getGamepads()[void 0!==a?a:0]);SyncInput.Gamepad.gamepads.push(this)};
SyncInput.Gamepad.prototype.setGamepad=function(a){if(void 0!==a){this.index=a.index;this.buttons=[];for(var b=0;b<a.buttons.length;b++)this.buttons.push(new SyncInput.Key);this.setProductVendor(a);this.connected=!0}else console.warn("SyncInput: No Gamepad found"),this.product=this.vendor=-1,this.connected=!1,this.index=-1,this.buttons=[]};
SyncInput.Gamepad.prototype.setProductVendor=function(a){try{var b=a.id.split(":");this.vendor=b[1].split(" ")[1];this.product=b[2].replace(" ","").replace(")","");return}catch(c){}try{b=a.id.split("-"),this.vendor=b[0],this.product=b[1]}catch(c){}};SyncInput.Gamepad.prototype.update=function(){var a=navigator.getGamepads()[this.index];if(void 0!==a)for(var b=0;b<this.buttons.length;b++)this.buttons[b].update(a.buttons[b].pressed?Key.KEY_DOWN:Key.KEY_UP)};
SyncInput.Gamepad.prototype.getAnalogueButton=function(a){return 0};SyncInput.Gamepad.prototype.getAxis=function(a){return 0};SyncInput.Gamepad.prototype.buttonPressed=function(a){return a>this.buttons.length?!1:this.buttons[a].isPressed};SyncInput.Gamepad.prototype.buttonJustPressed=function(a){return a>this.buttons.length?!1:this.buttons[a].justPressed};SyncInput.Gamepad.prototype.buttonJustReleased=function(a){return a>this.buttons.length?!1:this.buttons[a].justReleased};
SyncInput.Gamepad.prototype.dispose=function(){var a=SyncInput.Gamepad.gamepads.indexOf(this);-1!==a&&SyncInput.Gamepad.gamepads.splice(a,1)};SyncInput.Gamepad.gamepads=[];SyncInput.Gamepad.getGamepads=function(){return navigator.getGamepads()};SyncInput.Gamepad.startListener=function(){window.addEventListener("gamepadconnected",function(a){a=a.gamepad;for(var b=0;b<SyncInput.Gamepad.gamepads.length;b++)SyncInput.Gamepad.gamepads[b].index===a.index&&SyncInput.Gamepad.gamepads[b].setGamepad(a)})};
SyncInput.Gamepad.startListener();SyncInput.Gamepad.LEFT=14;SyncInput.Gamepad.RIGHT=15;SyncInput.Gamepad.DOWN=13;SyncInput.Gamepad.UP=12;SyncInput.Gamepad.SELECT=8;SyncInput.Gamepad.START=9;SyncInput.Gamepad.HOME=16;SyncInput.Gamepad.LEFT_TRIGGER_A=4;SyncInput.Gamepad.LEFT_TRIGGER_B=6;SyncInput.Gamepad.RIGHT_TRIGGER_A=5;SyncInput.Gamepad.RIGHT_TRIGGER_B=7;SyncInput.Gamepad.A=0;SyncInput.Gamepad.B=1;SyncInput.Gamepad.C=2;SyncInput.Gamepad.D=3;SyncInput.Gamepad.LEFT_ANALOGUE_HOR=0;
SyncInput.Gamepad.LEFT_ANALOGUE_VERT=1;SyncInput.Gamepad.RIGHT_ANALOGUE_HOR=2;SyncInput.Gamepad.RIGHT_ANALOGUE_VERT=3;
